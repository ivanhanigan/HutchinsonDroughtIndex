
---
title: "Hutchinson Drought Index"
author: "Ivan Hanigan"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Hutchinson Drought Index}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

# Introduction

This is a short introduction to the algorithm.  For fuller explanation see the original chapter of the report, included in the documentation of this package.

# The southwest slopes and plains region of New South Wales

- The southwest slopes and plains are included as a case study
- Data from the Garnaut Climate Change Review are provided
- These apply the future scenarios to the century and assumes that the rainfall pattern will be a repeat with the new conditions  
- This is obviously too simplistic, but was the method applied in our work in 2008 and of historical interest  

```{r, eval = F, echo = T}
library(HutchinsonDroughtIndex)
indir <- file.path(system.file(package="HutchinsonDroughtIndex"), "extdata")
dir(indir)
infile <- "GARNAUT_CLIMATE_CHANGE_drought_futures_dry_southwest_slopes_sd07.csv"
dat <- read.csv(file.path(indir, infile))
str(dat)
dat$date <- as.Date(dat$date)
sds <- names(table(dat$sd_group))
png("graphs/rainfall_from_garnaut_review.png")
par(mfrow = c(2,1))
for(sdi in sds){
with(dat[dat$sd_group == sdi,],
  plot(date, avrain, type = "l", col = "grey")
)
with(dat[dat$sd_group == sdi,],
  lines(lowess(avrain ~ date, f = 0.02),  col = "blue")
)
  title(sdi)
}
dev.off()
```

![graphs/rainfall_from_garnaut_review.png](graphs/rainfall_from_garnaut_review.png)

# Hutchinsons indices based on entire historical distribution

- The method was first made available as a simple algorithm that looks at the entire distribution of the time series

```{r, eval = F, echo = T}
# just use the observed record
dat2 <- subset(dat, year <= 2007)
tail(dat2)
# the function runs on one region only
#for(sdi in sds){
sdi <- sds[1]
  indat <- subset(dat2, sd_group == sdi, select = c("date", "year", "month", "avrain"))
  drt <- drought_index_stations(indat, years = length(names(table(indat$year))))
str(drt)
#}

```
